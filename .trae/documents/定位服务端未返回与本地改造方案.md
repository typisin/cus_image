## 问题定位
- 目前页面显示类似 “A photo of size … Dominant tones …” 的本地分析文案，说明云端调用未成功，代码走了回退逻辑。
- 原因：当前用的是 `python3 -m http.server 8000` 提供纯静态文件服务，并不存在 `/api/describe` 路由。
- 证据：
  - 前端调用位置：`describer.html:307` 附近，`fetch('/api/describe', { ... })`。
  - 回退逻辑：`describer.html:320` 附近，当 `serverDesc` 为空时改用 `analyze(img)`。
  - 服务端函数仅在 Vercel 的 Serverless 运行：`api/describe.js:1` 开头，读取 `process.env.VOLC_API_KEY`、`VOLC_ENDPOINT_ID | VOLC_MODEL`，本地静态服务不会触发。

## 方案A：使用 Vercel CLI 本地运行 Serverless（推荐）
- 安装并启动：在项目根运行 `vercel dev`，它会将 `api/describe.js` 作为本地 Serverless 路由暴露 `/api/describe`。
- 配置环境变量：在 Vercel 本地设置 `VOLC_API_KEY`、`VOLC_ENDPOINT_ID`（或 `VOLC_MODEL`）。
- 本地访问：改用 `http://localhost:3000/describer.html`，上传图片即可看到云端返回填充到 `#desc`。
- 优点：不改代码，行为最接近线上。

## 方案B：快速本地代理（如需在8000端口下使用）
- 新增一个轻量 Node 服务器（如 `server.js`）同时：
  - 静态托管 `index.html` 与静态资源。
  - 提供 `/api/describe` 路由，复用 `api/describe.js` 的调用逻辑（环境变量读取与 Ark 请求）。
- 前端保持 `fetch('/api/describe')` 不变，切换到该本地服务。
- 适合不使用 Vercel CLI 的本地场景。

## 方案C：先部署到 Vercel 并指向生产 API
- 将代码部署到 Vercel，设置环境变量 `VOLC_API_KEY`、`VOLC_ENDPOINT_ID`/`VOLC_MODEL`。
- 前端 `fetch('/api/describe')` 在生产站点可直接生效；本地继续作为回退预览。
- 如需本地也走生产 API，可临时将前端请求改为绝对地址（例如 `https://your-vercel-domain/api/describe`）。

## 安全与健壮性
- API Key只在服务端使用：存于环境变量，不在前端暴露、不打印日志。
- 返回解析：`choices[0].message.content` 为字符串或数组（含 `type=text`），代码已兼容。
- 出错提示：如上游错误或超时，前端显示“Generating description…”后落入回退，用户体验不中断。

## 拟执行变更（在您确认后）
- 若选择方案A：
  - 添加本地运行说明与 `vercel dev` 启动脚本；验证端到端调用，确保 `#desc` 填充来自服务端。
- 若选择方案B：
  - 新增本地代理服务器文件（仅开发用途），对接 `/api/describe`。
- 若选择方案C：
  - 协助部署到 Vercel，校验环境变量与端点；必要时前端临时指向线上绝对路径以便本地验证。

请确认采用的方案（推荐A），我将据此完成实施与验证。